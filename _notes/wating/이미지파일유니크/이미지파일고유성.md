---
title: 이미지파일고유성
permalink: /wating/image-Blob Storage
---

# 이미지 파일과 Blob Storage

- 보통 이미지 파일을 업로드할 때 Blob Storage를 많이 쓴다.
- 애플리케이션 서버의 무상태성을 보장하기 위해서이다.
- 그리고 해당 Blob Storage부분을 추상화 하는것이 좋다.
- 왜냐하면 이미지를 업로드 하는 부분이 예를 들어서 AWS의 S3를 사용 하고 있었다고 가정해보자.
- 그때 해당 부분이 추상화가 잘 되어 있다면 업로드 부분이 구현된 서비스나 모듈쪽에서 코드를 수정하지 않아도 된다.
- 근데 그러기 위해서는 중요한 점이 있는데 그건 바로 이미지 파일의 고유성이다.
- 이미지 경로와 예를 들면 버킷 url이 될것이고 그 이후의 것들의 파일 경로들을 사용자의 이미지 필드에 함께 저장 할것인가?
	- `/articles/production/articles/thumnail/image01.png` 
- 데이터베이스 이미지 필드에 딱 이미지 이름만 저장 할 것인가
	- `image01.png` 


각각의 장단점은 확실한것 같다.

## 이미지 경로 함께 저장

- 경로를 다 저장하게 되면 예를 들어서 S3 스토리지에서 GCP스토리지로 옮기게 될때 해당 파일경로를 무조건 유지해야 된다.

## 이미지 파일명만 저장

- 이미지 경로를 GCP에 어디에 저장하는걸 애플리케이션에서 정한후에 유동적으로 변경할 수 있게 된다.


## 이미지 파일명 고유성

- 둘다의 방법들중에서 공통적인 문제는 어쨋든 이미지 파일명이 고유성을 가져야 한다는 점이다.
- 어떻게 파일의 고유성을 보장할 수 있을까

