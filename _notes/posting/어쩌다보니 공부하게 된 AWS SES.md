

# AWS SES에서 ISP에서 발생하는 문제

> 쉽게 추적해서 해결 할 수 있는 문제와 생각보다 백엔드 개발자들이 어려움을 겪는 문제 2가지가 존재한다.
> *Hard Bounce* 와 *Soft Bounce* 이다.


## Hard Bounce

- Cloud Watch나 애플리케이션에서 exception을 통해서도 쉽게 message를 통해서 에러추적이 가능한 오류로 메일 반송 되거나 사용자 이메일 주소가 존재하지 않거나 하는 쉽게 추적이 가능한 오류다.

## Soft Bounce

- Soft Bounce 문제는 파악하기 힘들고 보통 ISP에서 재전송이 일어나면서 이때 *12시간* 동안 제한없는 메일 전송 재시도가 발생한다.
- 이런 경우에 보통 메일을 전송 했을때 고유 Id값을 가지고 AWS에 문의해서 추적을 요청 해야한다.
- 이미 애플리케이션에서 호출이 되고 AWS SES에서도 떠난 메일은 ISP에서 전송을 하는데 여기서 어떠한 이유로 재전송이 일어나면서 길게는 12시간 안에 도착하거나 하는지 확인 하는 방법은 애플리케이션 레벨에서는 존재 하지 않는다.
- 그렇기 때문에 이 문제를 접했을때 어떤것들을 점검 해야 되는지만 잘 알고 있으면 해당 문제들을 하나씩 해결하고 적용해 나가면서 소거해 나가다보면 충분히 해결 할 수 있는 문제이다.
- AWS 공식문서에는 이러한 방법들이 자세히 나와있고 *이메일을 전송하는 대상 국가와 리전의 이메일 마케팅 및 스팸 방지 법률과 규정에 대해서 잘 알고 있어야 합니다. 사용자는 전송하는 이메일이 이러한 법률을 준수하는지 확인할 책임이 있습니다.* 
- 거의 Soft Bounce문제는 내 생각에는 규정을 준수하지 않았기 때문에 발생한다고 생각한다.


# Reference

- https://en.wikipedia.org/wiki/Email_spam_legislation_by_country