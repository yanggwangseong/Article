---
layout: default
---

<div class="note-layout">
  <div class="note-main">
    <h1>{{ page.title }}</h1>
    <time datetime="{{ page.last_modified_at | date_to_xmlschema }}">
      {% if page.type != 'pages' %} Last updated on {{ page.last_modified_at | date: "%B %-d, %Y" }} {% endif %}
    </time>
    <div id="notes-entry-container">
      <content>
        {{ content }}
        <p>This line appears after every note.</p>
      </content>
    </div>
  </div>
  <aside class="note-side">
    <nav class="toc-nav">
      <ul class="toc-list">
        {% assign headings = content | split: '<h' %}
        {% for h in headings %}
          {% if forloop.first == false %}
            {% assign level = h | truncate: 1, '' %}
            {% if level == '1' or level == '2' or level == '3' %}
              {% assign header = h | split: '</h' | first %}
              {% assign title = header | split: '>' | last | strip %}
              {% assign id = title | downcase | replace: ' ', '-' | replace: '.', '' | replace: ':', '' %}
              <li class="toc-h{{ level }}"><a href="#{{ id }}">{{ title }}</a></li>
            {% endif %}
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
    <div class="series-box">
      <h3 style="margin-bottom: 1em; font-size: 1.1em;">Series</h3>
      {% if page.backlinks.size > 0 %}
      <div style="display: grid; grid-gap: 1em; grid-template-columns: repeat(1fr)">
        <div class="backlink-box">
          {% for backlink in page.backlinks %}
          <a class="internal-link" href="{{ site.baseurl }}{{ backlink.url }}{%- if site.use_html_extension -%}.html{%- endif -%}">{{ backlink.title }}</a><br />
          {% endfor %}
        </div>
        <br />
        <!-- 그래프 숨김 -->
        <!-- {% include notes_graph.html %} -->
      </div>
      {% else %}
      <div style="font-size: 0.9em">
        <p>There are no notes linking to this note.</p>
      </div>
      {% endif %}
    </div>
  </aside>
</div>

<style>
.note-main {
  max-width: 760px;
  margin: 0 auto;
  padding: 0 1.5rem;
  background: #fff;
}

.note-layout {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 2.5rem;
  position: relative;
}

.note-side {
  min-width: 210px;
  max-width: 260px;
  position: sticky;
  top: 4.5rem;
  align-self: flex-start;
  height: fit-content;
}

.toc-nav {
  background: none;
  box-shadow: none;
  border-radius: 0;
  padding: 0 0 0 1.2rem;
  font-size: 0.98rem;
  border-left: 2px dotted #e5e7eb;
  margin-bottom: 1.5rem;
}
.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.toc-h1 {
  margin-bottom: 0.5em;
  font-weight: 600;
  color: #7b8794;
}
.toc-h2 {
  margin-left: 1.2em;
  margin-bottom: 0.3em;
  font-weight: 400;
  color: #9ca3af;
}
.toc-h3 {
  margin-left: 2.2em;
  margin-bottom: 0.2em;
  font-weight: 400;
  color: #b0b8c1;
}
.toc-list a {
  color: #7b8794;
  text-decoration: none;
  font-size: 0.98em;
  transition: color 0.15s;
}
.toc-list a:hover {
  color: #2563eb;
  text-decoration: underline;
}
@media (max-width: 900px) {
  .note-layout {
    flex-direction: column;
    gap: 1.5rem;
  }
  .note-main {
    max-width: 100vw;
    padding: 0 0.5rem;
  }
  .note-side {
    position: static;
    max-width: 100vw;
    min-width: 0;
    margin-top: 2.5rem;
  }
}
</style>
